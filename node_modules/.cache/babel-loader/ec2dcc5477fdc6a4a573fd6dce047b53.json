{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wrade\\\\Desktop\\\\shopcart\\\\frontend\\\\src\\\\Components\\\\Checkout.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { commerce } from '../lib/Commerce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Checkout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checkoutToken: {},\n      // Customer details\n      firstName: 'Jane',\n      lastName: 'Doe',\n      email: 'janedoe@email.com',\n      // Shipping details\n      shippingName: 'Jane Doe',\n      shippingStreet: '123 Fake St',\n      shippingCity: '',\n      shippingStateProvince: '',\n      shippingPostalZipCode: '',\n      shippingCountry: '',\n      // Payment details\n      cardNum: '4242 4242 4242 4242',\n      expMonth: '11',\n      expYear: '2023',\n      ccv: '123',\n      billingPostalZipcode: '',\n      // Shipping and fulfillment data\n      shippingCountries: {},\n      shippingSubdivisions: {},\n      shippingOptions: [],\n      shippingOption: ''\n    };\n    this.handleFormChanges = this.handleFormChanges.bind(this);\n    this.handleShippingCountryChange = this.handleShippingCountryChange.bind(this);\n    this.handleSubdivisionChange = this.handleSubdivisionChange.bind(this);\n    this.handleCaptureCheckout = this.handleCaptureCheckout.bind(this);\n  }\n\n  componentDidMount() {\n    this.generateCheckoutToken();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.shippingCountry !== prevState.shippingCountry) {\n      this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry);\n    }\n  }\n\n  sanitizedLineItems(lineItems) {\n    return lineItems.reduce((data, lineItem) => {\n      const item = data;\n      let variantData = null;\n\n      if (lineItem.selected_options.length) {\n        variantData = {\n          [lineItem.selected_options[0].group_id]: lineItem.selected_options[0].option_id\n        };\n      }\n\n      item[lineItem.id] = {\n        quantity: lineItem.quantity,\n        variants: variantData\n      };\n      return item;\n    }, {});\n  }\n  /**\r\n   *  Generates a checkout token\r\n   *  https://commercejs.com/docs/sdk/checkout#generate-token\r\n   */\n\n\n  generateCheckoutToken() {\n    const {\n      cart\n    } = this.props;\n\n    if (cart.line_items.length) {\n      return commerce.checkout.generateToken(cart.id, {\n        type: 'cart'\n      }).then(token => this.setState({\n        checkoutToken: token\n      })).then(() => this.fetchShippingCountries(this.state.checkoutToken.id)).catch(error => {\n        console.log('There was an error in generating a token', error);\n      });\n    }\n  }\n\n  /**\r\n   * Fetches a list of countries available to ship to checkout token\r\n   * https://commercejs.com/docs/sdk/checkout#list-available-shipping-countries\r\n   *\r\n   * @param {string} checkoutTokenId\r\n   */\n  fetchShippingCountries(checkoutTokenId) {\n    commerce.services.localeListShippingCountries(checkoutTokenId).then(countries => {\n      this.setState({\n        shippingCountries: countries.countries\n      });\n    }).catch(error => {\n      console.log('There was an error fetching a list of shipping countries', error);\n    });\n  }\n\n  /**\r\n   * Fetches the subdivisions (provinces/states) for a country\r\n   * https://commercejs.com/docs/sdk/checkout#list-all-subdivisions-for-a-country\r\n   *\r\n   * @param {string} countryCode\r\n   */\n  fetchSubdivisions(countryCode) {\n    commerce.services.localeListSubdivisions(countryCode).then(subdivisions => {\n      this.setState({\n        shippingSubdivisions: subdivisions.subdivisions\n      });\n    }).catch(error => {\n      console.log('There was an error fetching the subdivisions', error);\n    });\n  }\n\n  /**\r\n   * Fetches the available shipping methods for the current checkout\r\n   * https://commercejs.com/docs/sdk/checkout#get-shipping-methods\r\n   *\r\n   * @param {string} checkoutTokenId\r\n   * @param {string} country\r\n   * @param {string} stateProvince\r\n   */\n  fetchShippingOptions(checkoutTokenId, country) {\n    let stateProvince = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    commerce.checkout.getShippingOptions(checkoutTokenId, {\n      country: country,\n      region: stateProvince\n    }).then(options => {\n      // Pre-select the first available method\n      const shippingOption = options[0] || null;\n      this.setState({\n        shippingOption: shippingOption,\n        shippingOptions: options\n      });\n    }).catch(error => {\n      console.log('There was an error fetching the shipping methods', error);\n    });\n  }\n\n  handleFormChanges(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleShippingCountryChange(e) {\n    const currentValue = e.target.value;\n    this.fetchSubdivisions(currentValue);\n  }\n\n  handleSubdivisionChange(e) {\n    const currentValue = e.target.value;\n    this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry, currentValue);\n  }\n\n  handleCaptureCheckout(e) {\n    const {\n      cart\n    } = this.props;\n    e.preventDefault();\n    const orderData = {\n      line_items: this.sanitizedLineItems(cart.line_items),\n      customer: {\n        firstname: this.state.firstName,\n        lastname: this.state.lastName,\n        email: this.state.email\n      },\n      shipping: {\n        name: this.state.shippingName,\n        street: this.state.shippingStreet,\n        town_city: this.state.shippingCity,\n        county_state: this.state.shippingStateProvince,\n        postal_zip_code: this.state.shippingPostalZipCode,\n        country: this.state.shippingCountry\n      },\n      fulfillment: {\n        shipping_method: this.state.shippingOption.id\n      },\n      payment: {\n        gateway: \"test_gateway\",\n        card: {\n          number: this.state.cardNum,\n          expiry_month: this.state.expMonth,\n          expiry_year: this.state.expYear,\n          cvc: this.state.ccv,\n          postal_zip_code: this.state.shippingPostalZipCode\n        }\n      }\n    };\n    this.props.onCaptureCheckout(this.state.checkoutToken.id, orderData);\n    this.props.history.push('/confirmation');\n  }\n\n  renderCheckoutForm() {\n    const {\n      shippingCountries,\n      shippingSubdivisions,\n      shippingOptions\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"checkout__form\",\n      onChange: this.handleFormChanges,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"checkout__subheading\",\n        children: \"Customer information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"firstName\",\n        children: \"First name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.firstName,\n        name: \"firstName\",\n        placeholder: \"Enter your first name\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"lastName\",\n        children: \"Last name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.lastName,\n        name: \"lastName\",\n        placeholder: \"Enter your last name\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.email,\n        name: \"email\",\n        placeholder: \"Enter your email\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"checkout__subheading\",\n        children: \"Shipping details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingName\",\n        children: \"Full name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingName,\n        name: \"shippingName\",\n        placeholder: \"Enter your shipping full name\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingStreet\",\n        children: \"Street address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingStreet,\n        name: \"shippingStreet\",\n        placeholder: \"Enter your street address\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingCity\",\n        children: \"City\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingCity,\n        name: \"shippingCity\",\n        placeholder: \"Enter your city\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingPostalZipCode\",\n        children: \"Postal/Zip code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        onChange: this.handleFormChanges,\n        value: this.state.shippingPostalZipCode,\n        name: \"shippingPostalZipCode\",\n        placeholder: \"Enter your postal/zip code\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingCountry\",\n        children: \"Country\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: this.state.shippingCountry,\n        name: \"shippingCountry\",\n        onChange: this.handleShippingCountryChange,\n        className: \"checkout__select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          disabled: true,\n          children: \"Country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this), Object.keys(shippingCountries).map(index => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: index,\n            children: shippingCountries[index]\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 33\n          }, this);\n        }), \";\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingStateProvince\",\n        children: \"State/province\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: this.state.shippingStateProvince,\n        name: \"shippingStateProvince\",\n        onChange: this.handleSubdivisionChange,\n        className: \"checkout__select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          className: \"checkout__option\",\n          disabled: true,\n          children: \"State/province\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, this), Object.keys(shippingSubdivisions).map(index => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: index,\n            children: shippingSubdivisions[index]\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 33\n          }, this);\n        }), \";\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"shippingOption\",\n        children: \"Shipping method\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: this.state.shippingOption.id,\n        name: \"shippingOption\",\n        onChange: this.handleFormChanges,\n        className: \"checkout__select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          className: \"checkout__select-option\",\n          disabled: true,\n          children: \"Select a shipping method\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this), shippingOptions.map((method, index) => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            className: \"checkout__select-option\",\n            value: method.id,\n            children: `${method.description} - $${method.price.formatted_with_code}`\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 33\n          }, this);\n        }), \";\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"checkout__subheading\",\n        children: \"Payment information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"cardNum\",\n        children: \"Credit card number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"cardNum\",\n        onChange: this.handleFormChanges,\n        value: this.state.cardNum,\n        placeholder: \"Enter your card number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"expMonth\",\n        children: \"Expiry month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"expMonth\",\n        onChange: this.handleFormChanges,\n        value: this.state.expMonth,\n        placeholder: \"Card expiry month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"expYear\",\n        children: \"Expiry year\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"expYear\",\n        onChange: this.handleFormChanges,\n        value: this.state.expYear,\n        placeholder: \"Card expiry year\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"checkout__label\",\n        htmlFor: \"ccv\",\n        children: \"CCV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"checkout__input\",\n        type: \"text\",\n        name: \"ccv\",\n        onChange: this.handleFormChanges,\n        value: this.state.ccv,\n        placeholder: \"CCV (3 digits)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleCaptureCheckout,\n        className: \"checkout__btn-confirm\",\n        children: \"Confirm order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }, this);\n  }\n\n  renderCheckoutSummary() {\n    const {\n      cart\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout__summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Order summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }, this), cart.line_items.map(lineItem => /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"checkout__summary-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"checkout__summary-img\",\n              src: lineItem.media.source,\n              alt: lineItem.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"checkout__summary-name\",\n              children: [lineItem.quantity, \" x \", lineItem.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"checkout__summary-value\",\n              children: lineItem.line_total.formatted_with_symbol\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 37\n            }, this)]\n          }, lineItem.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 33\n          }, this)\n        }, void 0, false)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"checkout__summary-total\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"checkout__summary-price\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Subtotal:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 29\n            }, this), cart.subtotal.formatted_with_symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"checkout__heading\",\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"checkout__wrapper\",\n        children: [this.renderCheckoutForm(), this.renderCheckoutSummary()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\n;\nexport default Checkout;\nCheckout.propTypes = {\n  cart: PropTypes.object,\n  history: PropTypes.object,\n  onCaptureCheckout: () => {}\n};","map":{"version":3,"sources":["C:/Users/wrade/Desktop/shopcart/frontend/src/Components/Checkout.js"],"names":["React","Component","PropTypes","commerce","Checkout","constructor","props","state","checkoutToken","firstName","lastName","email","shippingName","shippingStreet","shippingCity","shippingStateProvince","shippingPostalZipCode","shippingCountry","cardNum","expMonth","expYear","ccv","billingPostalZipcode","shippingCountries","shippingSubdivisions","shippingOptions","shippingOption","handleFormChanges","bind","handleShippingCountryChange","handleSubdivisionChange","handleCaptureCheckout","componentDidMount","generateCheckoutToken","componentDidUpdate","prevProps","prevState","fetchShippingOptions","id","sanitizedLineItems","lineItems","reduce","data","lineItem","item","variantData","selected_options","length","group_id","option_id","quantity","variants","cart","line_items","checkout","generateToken","type","then","token","setState","fetchShippingCountries","catch","error","console","log","checkoutTokenId","services","localeListShippingCountries","countries","fetchSubdivisions","countryCode","localeListSubdivisions","subdivisions","country","stateProvince","getShippingOptions","region","options","e","target","name","value","currentValue","preventDefault","orderData","customer","firstname","lastname","shipping","street","town_city","county_state","postal_zip_code","fulfillment","shipping_method","payment","gateway","card","number","expiry_month","expiry_year","cvc","onCaptureCheckout","history","push","renderCheckoutForm","Object","keys","map","index","method","description","price","formatted_with_code","renderCheckoutSummary","media","source","line_total","formatted_with_symbol","subtotal","render","propTypes","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { commerce } from '../lib/Commerce';\r\n\r\nclass Checkout extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            checkoutToken: {},\r\n            // Customer details\r\n            firstName: 'Jane',\r\n            lastName: 'Doe',\r\n            email: 'janedoe@email.com',\r\n            // Shipping details\r\n            shippingName: 'Jane Doe',\r\n            shippingStreet: '123 Fake St',\r\n            shippingCity: '',\r\n            shippingStateProvince: '',\r\n            shippingPostalZipCode: '',\r\n            shippingCountry: '',\r\n            // Payment details\r\n            cardNum: '4242 4242 4242 4242',\r\n            expMonth: '11',\r\n            expYear: '2023',\r\n            ccv: '123',\r\n            billingPostalZipcode: '',\r\n            // Shipping and fulfillment data\r\n            shippingCountries: {},\r\n            shippingSubdivisions: {},\r\n            shippingOptions: [],\r\n            shippingOption: '',\r\n        }\r\n\r\n        this.handleFormChanges = this.handleFormChanges.bind(this);\r\n        this.handleShippingCountryChange = this.handleShippingCountryChange.bind(this);\r\n        this.handleSubdivisionChange = this.handleSubdivisionChange.bind(this);\r\n        this.handleCaptureCheckout = this.handleCaptureCheckout.bind(this);\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.generateCheckoutToken();\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.state.shippingCountry !== prevState.shippingCountry) {\r\n          this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry);\r\n        }\r\n    };\r\n\r\n    sanitizedLineItems(lineItems) {\r\n      return lineItems.reduce((data, lineItem) => {\r\n        const item = data;\r\n        let variantData = null;\r\n        if (lineItem.selected_options.length) {\r\n          variantData = {\r\n            [lineItem.selected_options[0].group_id]: lineItem.selected_options[0].option_id,\r\n          };\r\n        }\r\n        item[lineItem.id] = {\r\n          quantity: lineItem.quantity,\r\n          variants: variantData,\r\n        };\r\n        return item;\r\n      }, {});\r\n    }\r\n\r\n   /**\r\n    *  Generates a checkout token\r\n    *  https://commercejs.com/docs/sdk/checkout#generate-token\r\n    */\r\n    generateCheckoutToken() {\r\n        const { cart } = this.props;\r\n        if (cart.line_items.length) {\r\n            return commerce.checkout.generateToken(cart.id, { type: 'cart' })\r\n                .then((token) => this.setState({ checkoutToken: token }))\r\n                .then(() => this.fetchShippingCountries(this.state.checkoutToken.id))\r\n                .catch((error) => {\r\n                    console.log('There was an error in generating a token', error);\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Fetches a list of countries available to ship to checkout token\r\n     * https://commercejs.com/docs/sdk/checkout#list-available-shipping-countries\r\n     *\r\n     * @param {string} checkoutTokenId\r\n     */\r\n    fetchShippingCountries(checkoutTokenId) {\r\n        commerce.services.localeListShippingCountries(checkoutTokenId).then((countries) => {\r\n            this.setState({\r\n                shippingCountries: countries.countries,\r\n            })\r\n        }).catch((error) => {\r\n            console.log('There was an error fetching a list of shipping countries', error);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Fetches the subdivisions (provinces/states) for a country\r\n     * https://commercejs.com/docs/sdk/checkout#list-all-subdivisions-for-a-country\r\n     *\r\n     * @param {string} countryCode\r\n     */\r\n    fetchSubdivisions(countryCode) {\r\n        commerce.services.localeListSubdivisions(countryCode).then((subdivisions) => {\r\n            this.setState({\r\n                shippingSubdivisions: subdivisions.subdivisions,\r\n            })\r\n        }).catch((error) => {\r\n            console.log('There was an error fetching the subdivisions', error);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Fetches the available shipping methods for the current checkout\r\n     * https://commercejs.com/docs/sdk/checkout#get-shipping-methods\r\n     *\r\n     * @param {string} checkoutTokenId\r\n     * @param {string} country\r\n     * @param {string} stateProvince\r\n     */\r\n    fetchShippingOptions(checkoutTokenId, country, stateProvince = null) {\r\n        commerce.checkout.getShippingOptions(checkoutTokenId,\r\n            {\r\n                country: country,\r\n                region: stateProvince\r\n            }).then((options) => {\r\n                // Pre-select the first available method\r\n                const shippingOption = options[0] || null;\r\n                this.setState({\r\n                    shippingOption: shippingOption,\r\n                    shippingOptions: options\r\n                })\r\n            }).catch((error) => {\r\n                console.log('There was an error fetching the shipping methods', error);\r\n        });\r\n    };\r\n\r\n    handleFormChanges(e) {\r\n      this.setState({\r\n        [e.target.name]: e.target.value,\r\n      });\r\n    };\r\n\r\n    handleShippingCountryChange(e) {\r\n      const currentValue = e.target.value;\r\n      this.fetchSubdivisions(currentValue);\r\n    };\r\n\r\n    handleSubdivisionChange(e) {\r\n      const currentValue = e.target.value;\r\n      this.fetchShippingOptions(this.state.checkoutToken.id, this.state.shippingCountry, currentValue)\r\n    }\r\n\r\n    handleCaptureCheckout(e) {\r\n        const { cart } = this.props;\r\n        e.preventDefault();\r\n        const orderData = {\r\n            line_items: this.sanitizedLineItems(cart.line_items),\r\n            customer: {\r\n                firstname: this.state.firstName,\r\n                lastname: this.state.lastName,\r\n                email: this.state.email\r\n            },\r\n            shipping: {\r\n                name: this.state.shippingName,\r\n                street: this.state.shippingStreet,\r\n                town_city: this.state.shippingCity,\r\n                county_state: this.state.shippingStateProvince,\r\n                postal_zip_code: this.state.shippingPostalZipCode,\r\n                country: this.state.shippingCountry,\r\n            },\r\n            fulfillment: {\r\n                shipping_method: this.state.shippingOption.id\r\n            },\r\n            payment: {\r\n                gateway: \"test_gateway\",\r\n                card: {\r\n                    number: this.state.cardNum,\r\n                    expiry_month: this.state.expMonth,\r\n                    expiry_year: this.state.expYear,\r\n                    cvc: this.state.ccv,\r\n                    postal_zip_code: this.state.shippingPostalZipCode\r\n                }\r\n            }\r\n        };\r\n        this.props.onCaptureCheckout(this.state.checkoutToken.id, orderData);\r\n        this.props.history.push('/confirmation');\r\n    };\r\n\r\n    renderCheckoutForm() {\r\n        const { shippingCountries, shippingSubdivisions, shippingOptions } = this.state;\r\n\r\n        return (\r\n            <form className=\"checkout__form\" onChange={this.handleFormChanges}>\r\n                <h4 className=\"checkout__subheading\">Customer information</h4>\r\n\r\n                    <label className=\"checkout__label\" htmlFor=\"firstName\">First name</label>\r\n                    <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.firstName} name=\"firstName\" placeholder=\"Enter your first name\" required />\r\n\r\n                    <label className=\"checkout__label\" htmlFor=\"lastName\">Last name</label>\r\n                    <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.lastName}name=\"lastName\" placeholder=\"Enter your last name\" required />\r\n\r\n                    <label className=\"checkout__label\" htmlFor=\"email\">Email</label>\r\n                    <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.email} name=\"email\" placeholder=\"Enter your email\" required />\r\n\r\n                <h4 className=\"checkout__subheading\">Shipping details</h4>\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingName\">Full name</label>\r\n                <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.shippingName} name=\"shippingName\" placeholder=\"Enter your shipping full name\" required />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingStreet\">Street address</label>\r\n                <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.shippingStreet} name=\"shippingStreet\" placeholder=\"Enter your street address\" required />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingCity\">City</label>\r\n                <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.shippingCity} name=\"shippingCity\" placeholder=\"Enter your city\" required />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingPostalZipCode\">Postal/Zip code</label>\r\n                <input className=\"checkout__input\" type=\"text\" onChange={this.handleFormChanges} value={this.state.shippingPostalZipCode} name=\"shippingPostalZipCode\" placeholder=\"Enter your postal/zip code\" required />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingCountry\">Country</label>\r\n                <select\r\n                    value={this.state.shippingCountry}\r\n                    name=\"shippingCountry\"\r\n                    onChange={this.handleShippingCountryChange}\r\n                    className=\"checkout__select\"\r\n                >\r\n                    <option disabled>Country</option>\r\n                    {\r\n                        Object.keys(shippingCountries).map((index) => {\r\n                            return (\r\n                                <option value={index} key={index}>{shippingCountries[index]}</option>\r\n                            );\r\n                        })\r\n                    };\r\n                </select>\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingStateProvince\">State/province</label>\r\n                <select\r\n                    value={this.state.shippingStateProvince}\r\n                    name=\"shippingStateProvince\"\r\n                    onChange={this.handleSubdivisionChange}\r\n                    className=\"checkout__select\"\r\n                >\r\n                    <option className=\"checkout__option\" disabled>State/province</option>\r\n                    {\r\n                        Object.keys(shippingSubdivisions).map((index) => {\r\n                            return (\r\n                                <option value={index} key={index}>{shippingSubdivisions[index]}</option>\r\n                            );\r\n                        })\r\n                    };\r\n\r\n                </select>\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"shippingOption\">Shipping method</label>\r\n                <select\r\n                    value={this.state.shippingOption.id}\r\n                    name=\"shippingOption\"\r\n                    onChange={this.handleFormChanges}\r\n                    className=\"checkout__select\"\r\n                >\r\n                    <option className=\"checkout__select-option\" disabled>Select a shipping method</option>\r\n                    {\r\n                        shippingOptions.map((method, index) => {\r\n                            return (\r\n                                <option className=\"checkout__select-option\" value={method.id} key={index}>{`${method.description} - $${method.price.formatted_with_code}` }</option>\r\n                            );\r\n                        })\r\n                    };\r\n                </select>\r\n\r\n                <h4 className=\"checkout__subheading\">Payment information</h4>\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"cardNum\">Credit card number</label>\r\n                <input className=\"checkout__input\" type=\"text\" name=\"cardNum\" onChange={this.handleFormChanges} value={this.state.cardNum} placeholder=\"Enter your card number\" />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"expMonth\">Expiry month</label>\r\n                <input className=\"checkout__input\" type=\"text\" name=\"expMonth\" onChange={this.handleFormChanges} value={this.state.expMonth} placeholder=\"Card expiry month\" />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"expYear\">Expiry year</label>\r\n                <input className=\"checkout__input\" type=\"text\" name=\"expYear\" onChange={this.handleFormChanges} value={this.state.expYear} placeholder=\"Card expiry year\" />\r\n\r\n                <label className=\"checkout__label\" htmlFor=\"ccv\">CCV</label>\r\n                <input className=\"checkout__input\" type=\"text\" name=\"ccv\" onChange={this.handleFormChanges} value={this.state.ccv} placeholder=\"CCV (3 digits)\" />\r\n\r\n                <button onClick={this.handleCaptureCheckout} className=\"checkout__btn-confirm\">Confirm order</button>\r\n            </form>\r\n        );\r\n    };\r\n\r\n    renderCheckoutSummary() {\r\n        const { cart } = this.props;\r\n\r\n        return (\r\n            <>\r\n                <div className=\"checkout__summary\">\r\n                    <h4>Order summary</h4>\r\n                        {cart.line_items.map((lineItem) => (\r\n                            <>\r\n                                <div key={lineItem.id} className=\"checkout__summary-details\">\r\n                                    <img className=\"checkout__summary-img\" src={lineItem.media.source} alt={lineItem.name}/>\r\n                                    <p className=\"checkout__summary-name\">{lineItem.quantity} x {lineItem.name}</p>\r\n                                    <p className=\"checkout__summary-value\">{lineItem.line_total.formatted_with_symbol}</p>\r\n                                    </div>\r\n                            </>\r\n                        ))}\r\n                    <div className=\"checkout__summary-total\">\r\n                        <p className=\"checkout__summary-price\">\r\n                            <span>Subtotal:</span>\r\n                            {cart.subtotal.formatted_with_symbol}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n          <div className=\"checkout\">\r\n                <h2 className=\"checkout__heading\">\r\n                    Checkout\r\n                </h2>\r\n                <div className=\"checkout__wrapper\">\r\n                    { this.renderCheckoutForm() }\r\n                    { this.renderCheckoutSummary() }\r\n                </div>\r\n          </div>\r\n        );\r\n    };\r\n};\r\n\r\nexport default Checkout;\r\n\r\nCheckout.propTypes = {\r\n    cart: PropTypes.object,\r\n    history: PropTypes.object,\r\n    onCaptureCheckout: () => {},\r\n};"]},"metadata":{},"sourceType":"module"}